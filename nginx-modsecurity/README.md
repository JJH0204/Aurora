# ModSecurity 규칙 설정

이 디렉토리는 NGINX ModSecurity WAF(Web Application Firewall) 설정을 포함하고 있습니다.

## 파일 구조

- `modsecurity.conf`: ModSecurity 메인 설정 파일
- `reload_nginx.bat`: NGINX 설정 리로드 스크립트

## 규칙 체계

규칙은 OWASP Top 10을 기반으로 구성되어 있으며, 다음과 같은 ID 체계를 따릅니다:

### 기본 보안 규칙 (1000-1009)
- 1000: Content-Length 헤더 검증
- 1001: 요청 본문 크기 제한

### OWASP Top 10 규칙 (1010-1110)
1. **접근 제어 (1010-1019)**
   - 1010: 인증 우회 시도 탐지

2. **암호화 실패 (1020-1029)**
   - 1020: TLS 다운그레이드 시도 탐지

3. **인젝션 (1030-1039)**
   - 1030: SQL 인젝션 탐지
   - 1031: NoSQL 인젝션 탐지

4. **취약한 설계 (1040-1049)**
   - 1040: 과도한 요청 제한

5. **보안 설정 오류 (1050-1059)**
   - 1050: 디렉토리 탐색 시도 탐지

6. **취약한 구성 요소 (1060-1069)**
   - 1060: 구버전 API 접근 제한

7. **인증 실패 (1070-1079)**
   - 1070: 무차별 대입 공격 탐지

8. **소프트웨어 무결성 (1080-1089)**
   - 1080: 악성 파일 업로드 탐지

9. **로깅 실패 (1090-1099)**
   - 1090: 자동화된 도구 사용 감지

10. **SSRF (1100-1109)**
    - 1100: SSRF 공격 시도 탐지

11. **추가 보안 규칙 (1110+)**
    - 1110: XSS 공격 탐지

## 로깅

모든 규칙은 다음과 같은 로깅 정책을 따릅니다:
- 모든 차단된 요청은 로그에 기록됨
- 심각도(Severity) 레벨: CRITICAL, WARNING, INFO
- 로그 위치: `/var/log/modsec_audit.log`
- 디버그 로그 위치: `/var/log/modsec_debug.log`

## 설정 리로드

설정을 변경한 후에는 다음 명령어로 NGINX를 리로드하세요:
```batch
reload_nginx.bat
```
